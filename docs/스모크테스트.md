# Search V2 스모크 테스트 체크리스트

이 문서는 Search V2 기능의 핵심 동작을 검증하는 스모크 테스트 체크리스트입니다. 모든 테스트는 실제 사용자 시나리오를 기반으로 합니다.

## 테스트 환경

### 대상 경로
- **URL**: `http://localhost:3002/hub-v2`
- **Feature Flag**: `VITE_FEATURE_SEARCH_V2=true`

### 브라우저 지원
- Chrome/Edge (최신 2버전)
- Firefox (최신 2버전) 
- Safari (최신 2버전)
- Mobile Safari, Chrome Mobile

### 해상도 테스트
- 데스크톱: 1920x1080, 1366x768
- 태블릿: 768x1024
- 모바일: 375x667, 414x896

## 1. 페이지 진입 테스트

### 1.1 초기 로딩
- [ ] **URL 접근**: `/hub-v2`로 정상 접근 가능
- [ ] **페이지 제목**: "무엇을 하고 싶나요?" 표시
- [ ] **입력창 자동 포커스**: 페이지 로드 시 검색 입력창에 포커스
- [ ] **카드 표시**: 기본 카드 6개 표시 (더미 데이터)
- [ ] **모드 토글**: Simple/Advanced 토글 표시

### 1.2 초기 로딩 상태
- [ ] **스켈레톤 UI**: 첫 로딩 시 스켈레톤 즉시 노출
- [ ] **로딩 완료**: 데이터 로드 후 실제 콘텐츠로 교체
- [ ] **애니메이션**: 부드러운 페이드인 효과

**검증 기준**: 페이지 로딩 시간 < 3초, LCP < 2.5초

## 2. 검색 입력 및 제안 테스트

### 2.1 키워드 입력
- [ ] **입력 반응**: 텍스트 입력 시 즉시 반영
- [ ] **제안 표시**: 키워드 입력 시 제안 목록 표시 (≤8개)
- [ ] **디바운스**: 250ms 디바운스 적용 (연속 입력 시 마지막 입력만 처리)
- [ ] **필터링**: 입력된 키워드와 관련된 제안만 표시

### 2.2 제안 목록 동작
- [ ] **목록 표시**: `role="listbox"` 팝업으로 제안 표시
- [ ] **최대 개수**: 제안 8개 이하로 제한
- [ ] **빈 결과**: 매칭되는 제안이 없을 때 빈 목록
- [ ] **실시간 갱신**: 입력 변경 시 제안 목록 실시간 업데이트

**테스트 키워드**: "블로그", "PPT", "프롬프트", "이메일"

## 3. 키보드 네비게이션 테스트

### 3.1 화살표 키 탐색 (APG 기준)
- [ ] **↓ 키**: 다음 제안으로 이동, 마지막에서 첫 번째로 순환
- [ ] **↑ 키**: 이전 제안으로 이동, 첫 번째에서 마지막으로 순환
- [ ] **시각적 표시**: 활성 제안에 하이라이트 표시
- [ ] **ARIA 갱신**: `aria-activedescendant` 활성 항목 ID로 갱신

### 3.2 선택 및 편집
- [ ] **Enter 키**: 선택된 제안을 입력창에 복사
- [ ] **편집 가능**: 복사된 텍스트 추가 편집 가능
- [ ] **제안 닫힘**: Enter 후 제안 목록 자동 닫힘
- [ ] **포커스 유지**: 입력창에 포커스 유지

### 3.3 취소 동작
- [ ] **Escape 키**: 제안 목록 닫기
- [ ] **포커스 복귀**: 입력창으로 포커스 복귀
- [ ] **입력 보존**: 기존 입력 텍스트 보존

**참고**: [WAI-ARIA APG Combobox](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/)

## 4. 카드 클릭 및 사이드시트 테스트

### 4.1 카드 클릭 동작
- [ ] **카드 반응**: 카드 클릭 시 즉시 반응
- [ ] **시트 열림**: 우측에서 사이드시트 슬라이드 인
- [ ] **데스크톱 동작**: 고정 너비 사이드시트 (520px 또는 92vw)
- [ ] **애니메이션**: 200ms 슬라이드 애니메이션

### 4.2 모바일 반응형 (768px 이하)
- [ ] **모달 전환**: 사이드시트가 풀스크린 모달로 변경
- [ ] **하단 슬라이드**: 하단에서 위로 슬라이드 애니메이션
- [ ] **배경 스크림**: 반투명 배경 오버레이 표시
- [ ] **모서리 처리**: 상단 모서리 둥글게 처리

### 4.3 콘텐츠 표시
- [ ] **제목 표시**: 선택된 카드의 제목 표시
- [ ] **설명 표시**: 카드의 상세 설명 표시
- [ ] **폼 필드**: 목표, 톤, 분량 입력 필드 표시
- [ ] **액션 버튼**: 복사, 즐겨찾기, 실행, 공유 버튼 표시

**참고**: [Material Design Side sheets](https://m3.material.io/components/side-sheets/overview)

## 5. 사이드시트 포커스 및 상호작용 테스트

### 5.1 포커스 관리 (APG/MDN 기준)
- [ ] **초기 포커스**: 시트 열림 시 닫기 버튼으로 포커스 이동
- [ ] **포커스 트랩**: Tab/Shift+Tab이 시트 내부에서만 순환
- [ ] **순환 동작**: 마지막 요소에서 첫 번째 요소로 순환
- [ ] **외부 차단**: 시트 외부 요소로 포커스 이동 차단

### 5.2 닫기 동작
- [ ] **닫기 버튼**: X 버튼 클릭으로 시트 닫힘
- [ ] **Escape 키**: Esc 키로 시트 닫힘
- [ ] **배경 클릭**: 스크림 클릭으로 시트 닫힘 (모바일)
- [ ] **포커스 복귀**: 시트 닫힘 시 트리거 카드로 포커스 복귀

### 5.3 Advanced 모드 전환
- [ ] **토글 동작**: Simple ↔ Advanced 모드 전환
- [ ] **필드 추가**: Advanced 모드에서 추가 옵션 필드 표시
- [ ] **상태 유지**: 입력된 값 모드 전환 시 보존
- [ ] **접근성**: 토글 상태 스크린 리더로 인식

**참고**: [MDN dialog/aria-modal](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-modal), [WAI-ARIA Dialog APG](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/)

## 6. 로딩 상태 테스트

### 6.1 초기 진입 로딩 (NN/g 기준)
- [ ] **스켈레톤 표시**: 페이지 진입 즉시 스켈레톤 UI 표시
- [ ] **구조 유사성**: 실제 콘텐츠와 유사한 스켈레톤 구조
- [ ] **애니메이션**: 자연스러운 shimmer 애니메이션
- [ ] **즉시 교체**: 데이터 로드 완료 시 즉시 실제 콘텐츠로 교체

### 6.2 모듈 단위 로딩
- [ ] **스피너 표시**: 검색 중 입력창 영역에 스피너 표시
- [ ] **접근성 라벨**: `aria-label="검색 중"` 제공
- [ ] **적절한 크기**: 16-24px 크기의 스피너
- [ ] **색상 대비**: 충분한 색상 대비 (최소 3:1)

### 6.3 로딩 성능
- [ ] **체감 시간**: 스켈레톤으로 체감 대기시간 감소
- [ ] **응답성**: 로딩 중에도 UI 반응성 유지
- [ ] **상태 표시**: 로딩 상태의 명확한 시각적 표시

**참고**: [Nielsen Norman Group 응답 시간](https://www.nngroup.com/articles/response-times-3-important-limits/), [스켈레톤 UI 가이드](https://www.nngroup.com/articles/skeleton-screens/)

## 7. 에러 및 엣지 케이스 테스트

### 7.1 빈 상태
- [ ] **빈 검색**: 검색어 없을 때 기본 카드 6개 표시
- [ ] **검색 결과 없음**: 매칭되는 결과가 없을 때 적절한 메시지
- [ ] **네트워크 에러**: API 실패 시 에러 메시지 표시

### 7.2 입력 검증
- [ ] **특수문자**: 특수문자 입력 시 정상 처리
- [ ] **긴 텍스트**: 매우 긴 검색어 입력 시 적절한 처리
- [ ] **공백 처리**: 앞뒤 공백 자동 제거

### 7.3 반응형 동작
- [ ] **화면 크기 변경**: 브라우저 크기 변경 시 레이아웃 자동 조정
- [ ] **모바일 회전**: 세로/가로 모드 전환 시 정상 동작
- [ ] **키보드 표시**: 모바일에서 가상 키보드 표시 시 레이아웃 조정

## 테스트 시나리오

### 시나리오 1: 기본 검색 플로우
1. `/hub-v2` 페이지 접근
2. 검색창에 "블로그" 입력
3. 제안 목록에서 화살표 키로 "블로그 글 초안 만들기" 선택
4. Enter 키로 선택 확정
5. 해당 카드 클릭하여 사이드시트 열기
6. 폼 입력 후 닫기

### 시나리오 2: 모바일 사용자 플로우
1. 모바일 브라우저에서 페이지 접근
2. 터치로 검색창 활성화
3. 가상 키보드로 검색어 입력
4. 터치로 제안 선택
5. 카드 터치로 풀스크린 모달 열기
6. Advanced 모드 토글 후 입력
7. 배경 터치로 모달 닫기

### 시나리오 3: 키보드 전용 사용자
1. Tab 키로 페이지 탐색
2. Enter로 검색창 활성화
3. 키보드로 검색어 입력
4. 화살표 키로 제안 탐색
5. Enter로 선택 후 Tab으로 카드 이동
6. Space/Enter로 카드 활성화
7. Tab으로 시트 내부 탐색
8. Esc로 시트 닫기

## 자동화 테스트 연동

### Jest + Testing Library
- 각 체크리스트 항목을 자동화 테스트로 변환
- `tests/a11y.smoke.test.tsx` 파일로 관리
- CI/CD 파이프라인에서 자동 실행

### E2E 테스트 (Playwright)
- 실제 브라우저에서 전체 플로우 테스트
- 스크린샷 회귀 테스트
- 성능 메트릭 수집

## 성공 기준

### 필수 통과 항목 (P0)
- 페이지 진입 및 기본 UI 표시
- 검색 입력 및 제안 표시
- 키보드 네비게이션 완전 지원
- 카드 클릭 및 사이드시트 기본 동작

### 권장 통과 항목 (P1)
- 포커스 트랩 완전 구현
- 모바일 반응형 동작
- 로딩 상태 적절한 표시

### 개선 항목 (P2)
- 애니메이션 성능 최적화
- 에러 처리 완성도
- 접근성 세부 개선

---

> 모든 P0 항목을 통과해야 사용자 출시가 가능하며, P1 항목까지 완료를 권장합니다.