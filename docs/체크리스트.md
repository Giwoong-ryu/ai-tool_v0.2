# Search V2 접근성 최소 검증 기준

이 문서는 Search V2 컴포넌트의 접근성 최소 기준을 정의합니다. 모든 검증 항목은 WAI-ARIA APG, MDN, Material Design 가이드라인을 기반으로 합니다.

## 1. Combobox 접근성 기준

### 1.1 ARIA 속성 요구사항
- [ ] `role="combobox"` 설정
- [ ] `aria-controls={listId}` 설정 (연결된 listbox ID 지정)
- [ ] `aria-activedescendant` 동적 갱신 (활성 옵션 ID 변경 시마다)
- [ ] `aria-expanded` 상태 표시 (팝업 열림/닫힘)
- [ ] `aria-autocomplete="list"` 설정

### 1.2 팝업 리스트 요구사항
- [ ] `role="listbox"` 설정
- [ ] 각 옵션에 `role="option"` 설정
- [ ] 활성 옵션에 `aria-selected="true"` 설정
- [ ] 고유한 `id` 값 (activedescendant 참조용)

### 1.3 키보드 내비게이션
- [ ] ↑/↓ 키로 옵션 탐색
- [ ] `aria-activedescendant` 실시간 업데이트
- [ ] Enter 키로 선택 및 입력창 복사
- [ ] Escape 키로 팝업 닫기

**참고**: [WAI-ARIA APG Combobox](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/), [W3C APG 예제](https://www.w3.org/WAI/ARIA/apg/example-index/combobox/combobox-autocomplete-list.html)

## 2. 모달 시트 접근성 기준

### 2.1 ARIA 속성 요구사항
- [ ] `role="dialog"` 설정
- [ ] `aria-modal="true"` 설정
- [ ] `aria-labelledby` 설정 (제목 요소 ID 참조)
- [ ] `aria-describedby` 설정 (설명 요소 ID 참조)

### 2.2 포커스 관리
- [ ] 모달 열림 시 내부로 포커스 이동 (첫 번째 상호작용 요소)
- [ ] 모달 표시 중 포커스 트랩 적용
- [ ] 모달 닫힘 시 트리거 요소로 포커스 복귀

### 2.3 키보드 지원
- [ ] Escape 키로 모달 닫기
- [ ] Tab/Shift+Tab으로 내부 요소 순환

**참고**: [MDN dialog/aria-modal](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-modal), [WAI-ARIA Dialog APG](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/)

## 3. 포커스 트랩 동작 기준

### 3.1 순환 동작
- [ ] Tab 키: 마지막 요소에서 첫 번째 요소로 순환
- [ ] Shift+Tab 키: 첫 번째 요소에서 마지막 요소로 순환
- [ ] 모달 외부 요소로 포커스 이동 차단

### 3.2 탈출 조건
- [ ] Escape 키로 포커스 트랩 해제
- [ ] 닫기 버튼 클릭으로 포커스 트랩 해제
- [ ] 배경 클릭으로 포커스 트랩 해제

**참고**: [a11y-collective 가이드](https://www.a11y-collective.com/blog/the-focus-trap/), [UXPin 포커스 관리](https://www.uxpin.com/studio/blog/guide-accessibility-focus-management/)

## 4. 사이드시트 방향 및 타입 기준

### 4.1 데스크톱 표준형
- [ ] 우측 고정 배치 (Material Design 권장)
- [ ] 슬라이드 애니메이션 (transform: translateX)
- [ ] 고정 너비 (520px 또는 화면의 92vw 중 작은 값)

### 4.2 모바일 모달형
- [ ] 전체 화면 덮기 (viewport 768px 이하)
- [ ] 하단에서 위로 슬라이드 (transform: translateY)
- [ ] 상단 모서리 둥글게 처리

### 4.3 공통 요구사항
- [ ] 닫기 아이콘 상시 제공
- [ ] 배경 스크림(Scrim) 표시
- [ ] 적절한 z-index 설정 (1040-1060)

**참고**: [Material Design Side sheets](https://m3.material.io/components/side-sheets/overview), [Material Design 스펙](https://material.io/components/sheets-side)

## 5. 로딩 표기 기준

### 5.1 전체 페이지 로딩
- [ ] 스켈레톤 UI 사용 (콘텐츠 구조 미리 표시)
- [ ] 실제 콘텐츠와 유사한 형태
- [ ] 로딩 애니메이션 적용 (shimmer 효과)

### 5.2 모듈 단위 로딩
- [ ] 스피너 사용 (작은 영역)
- [ ] 적절한 크기 및 색상
- [ ] 접근성 라벨 제공 (`aria-label="로딩 중"`)

### 5.3 성능 고려사항
- [ ] 스켈레톤으로 체감 대기시간 감소
- [ ] 로딩 상태의 `aria-hidden` 적절한 사용
- [ ] 로딩 완료 시 콘텐츠 즉시 교체

**참고**: [Nielsen Norman Group 로딩 기사](https://www.nngroup.com/articles/response-times-3-important-limits/), [스켈레톤 UI 연구](https://www.nngroup.com/articles/skeleton-screens/)

## 검증 도구 및 방법

### 자동 검증
- axe-core (jest-axe)
- WAVE 브라우저 확장
- Lighthouse 접근성 감사

### 수동 검증
- 키보드 전용 탐색
- 스크린 리더 테스트 (NVDA, JAWS)
- 시각적 포커스 표시 확인

### 브라우저 지원
- Chrome/Edge (최신 2버전)
- Firefox (최신 2버전)
- Safari (최신 2버전)
- 모바일 브라우저 (iOS Safari, Chrome Mobile)

## 우선순위

### P0 (필수)
- Combobox ARIA 속성
- 모달 포커스 관리
- 키보드 네비게이션

### P1 (중요)
- 포커스 트랩 완성도
- 사이드시트 반응형 동작

### P2 (개선)
- 로딩 UI 최적화
- 애니메이션 성능

## 검증 체크포인트

각 기능 구현 후 다음 순서로 검증:

1. **ARIA 속성 검증**: 개발자 도구에서 속성 값 확인
2. **키보드 테스트**: Tab, Enter, Escape, 화살표 키 동작 확인
3. **스크린 리더 테스트**: 음성 출력 및 탐색 가능성 확인
4. **반응형 테스트**: 다양한 화면 크기에서 동작 확인
5. **자동화 테스트**: Jest + Testing Library로 회귀 방지

---

> 이 체크리스트는 Search V2 컴포넌트의 최소 접근성 기준을 제시합니다. 모든 항목을 통과해야 사용자 출시가 가능합니다.